{"version":3,"file":"index.js","sources":["../src/ipc.ts","../src/menu.ts","../src/index.ts"],"sourcesContent":["import { ipcMain, Menu, MenuItem, nativeTheme } from \"electron\";\r\n// setup Inter Process Communication (IPC)\r\nexport function setupIPC(window) {\r\n    ipcMain.handle(\"toggle-dark-mode\", () => {\r\n        if (nativeTheme.shouldUseDarkColors) {\r\n            nativeTheme.themeSource = \"light\";\r\n        }\r\n        else {\r\n            nativeTheme.themeSource = \"dark\";\r\n        }\r\n        return nativeTheme.shouldUseDarkColors;\r\n    });\r\n    // will be available only in dev mode\r\n    const mouse_position = { x: Number, y: Number };\r\n    const menu = new Menu();\r\n    const menuItem = new MenuItem({\r\n        label: \"Inspect Element\",\r\n        click: () => {\r\n            window.inspectElement(mouse_position.x, mouse_position.y);\r\n        },\r\n    });\r\n    menu.append(menuItem);\r\n    ipcMain.on(\"right-click\", (_, x, y) => {\r\n        mouse_position.x = x;\r\n        mouse_position.y = y;\r\n        menu.popup({ window: window });\r\n    });\r\n}\r\n","import { Menu } from \"electron\";\r\nexport function setupMainMenu(window, isDev, isMac = false, appName = \"\") {\r\n    const menuTemplate = [\r\n        {\r\n            label: \"Files\",\r\n            submenu: [\r\n                {\r\n                    label: \"Exit\",\r\n                    accelerator: \"Alt+F4\",\r\n                    role: isMac ? \"close\" : \"quit\",\r\n                },\r\n            ],\r\n        },\r\n    ];\r\n    if (isMac) {\r\n        menuTemplate.unshift({\r\n            label: appName,\r\n            submenu: [\r\n                { role: \"quit\" },\r\n            ],\r\n        });\r\n    }\r\n    if (isDev) {\r\n        menuTemplate.push({\r\n            label: \"DEVELOPMENT\",\r\n            submenu: [\r\n                {\r\n                    label: \"Refresh\",\r\n                    accelerator: \"F5\",\r\n                    role: \"forceReload\",\r\n                },\r\n                {\r\n                    label: \"Toggle Developer Tools\",\r\n                    accelerator: \"F12\",\r\n                    role: \"toggleDevTools\",\r\n                },\r\n            ],\r\n        });\r\n    }\r\n    // set up the menu\r\n    const menu = Menu.buildFromTemplate(menuTemplate);\r\n    Menu.setApplicationMenu(menu);\r\n}\r\n","import { app, BrowserWindow, } from \"electron\";\r\nimport path from \"path\";\r\nimport { setupIPC } from \"./ipc\";\r\nimport { setupMainMenu } from \"./menu\";\r\nprocess.env[\"ELECTRON_DISABLE_SECURITY_WARNINGS\"] = \"true\";\r\nconst isDevelopment = \"ISDEV\" in process.env;\r\nconst isMac = process.platform === \"darwin\";\r\n// global reference to mainWindow (necessary to prevent window from being garbage collected)\r\nlet mainWindow;\r\nfunction createMainWindow() {\r\n    const window = new BrowserWindow({\r\n        show: false,\r\n        webPreferences: {\r\n            nodeIntegration: false,\r\n            contextIsolation: true,\r\n            preload: path.join(__dirname, \"preload.js\"),\r\n        },\r\n    });\r\n    if (isDevelopment) {\r\n        // this is for me only since I have a big monitor\r\n        // and I split my screen in a specific way when developing\r\n        window.setSize(1940, 1090);\r\n        window.setPosition(1510, 0);\r\n    }\r\n    else {\r\n        window.maximize();\r\n    }\r\n    if (isDevelopment) {\r\n        window.loadURL(`http://localhost:${8080}`);\r\n    }\r\n    else {\r\n        const urlToLoad = path.join(__dirname, \"..\", \"..\", \"front\", \"public\", \"index.html\");\r\n        window.loadURL(urlToLoad);\r\n    }\r\n    window.on(\"closed\", () => {\r\n        mainWindow = null;\r\n    });\r\n    window.on(\"ready-to-show\", () => {\r\n        window.show();\r\n        if (isDevelopment)\r\n            window.webContents.openDevTools();\r\n    });\r\n    return window;\r\n}\r\n// quit application when all windows are closed\r\napp.on(\"window-all-closed\", () => {\r\n    // on macOS it is common for applications to stay open until the user explicitly quits\r\n    if (!isMac) {\r\n        app.quit();\r\n    }\r\n});\r\napp.on(\"activate\", () => {\r\n    // on macOS it is common to re-create a window even after all windows have been closed\r\n    if (mainWindow === null) {\r\n        mainWindow = createMainWindow();\r\n    }\r\n});\r\n// create main BrowserWindow when electron is ready\r\napp.on(\"ready\", () => {\r\n    app.allowRendererProcessReuse = true;\r\n    mainWindow = createMainWindow();\r\n    setupMainMenu(mainWindow, isDevelopment, isMac, app.name);\r\n    setupIPC(mainWindow);\r\n});\r\n"],"names":["ipcMain","nativeTheme","Menu","MenuItem","BrowserWindow","path","app"],"mappings":"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"}